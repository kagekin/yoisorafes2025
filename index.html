<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YOISORA FES 2025 ä½œæˆ¦ä¼šè­°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <!-- GSAP and Tone.js for animations and sound -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <style>
        body {
            font-family: 'Noto Sans JP', 'Inter', sans-serif;
            overflow: hidden; /* Prevent scrollbars from explosion effect */
        }
        .chat-bubble::before {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            border-style: solid;
        }
        .chat-bubble-left::before {
            border-width: 8px 12px 8px 0;
            border-color: transparent #ffffff transparent transparent;
            left: -12px;
            top: 12px;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .background-image {
            background-image: url('https://i.imgur.com/Xh4eR6w.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        /* Style for explosion emojis */
        .explosion-emoji {
            position: absolute;
            font-size: 24px;
            user-select: none;
            pointer-events: none;
        }
    </style>
</head>
<body class="background-image bg-gray-900 flex items-center justify-center min-h-screen">

    <div class="w-full max-w-md mx-auto bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-2xl flex flex-col h-[90vh] max-h-[800px]">
        <!-- Header -->
        <header class="bg-slate-900/80 text-white p-3 flex items-center justify-between rounded-t-2xl shadow-lg">
            <div class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                <h1 class="font-bold text-lg">ãƒ¨ã‚¤ã‚½ãƒ©ãƒ•ã‚§ã‚¹ä½œæˆ¦ä¼šè­° (7)</h1>
            </div>
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
            </div>
        </header>

        <!-- Chat Area -->
        <main id="chat-area" class="flex-1 p-4 overflow-y-auto space-y-4">
            <!-- Messages and logo will be appended here -->
        </main>

        <!-- Choice Area -->
        <footer id="choice-area" class="p-4 border-t border-slate-700/50">
            <div id="choices" class="grid grid-cols-1 gap-2">
                <!-- Choices will be appended here -->
            </div>
        </footer>
    </div>

    <script>
        const chatArea = document.getElementById('chat-area');
        const choiceArea = document.getElementById('choice-area');
        const choicesContainer = document.getElementById('choices');

        // Character definitions
        const characters = {
            oto: { name: 'ãŠã¨', avatar: 'https://pbs.twimg.com/profile_images/1942616127693111296/KTgfARQ2_400x400.jpg' },
            akira: { name: 'ã‚¢ã‚­ãƒ©', avatar: 'https://placehold.co/40x40/60a5fa/ffffff?text=A' },
            yui: { name: 'ãƒ¦ã‚¤', avatar: 'https://placehold.co/40x40/a78bfa/ffffff?text=Y' },
            kawashii: { name: 'ã‹ã‚ã—ãƒ', avatar: 'https://pbs.twimg.com/profile_images/1751672844101312512/p2MkkNhA_400x400.jpg' },
            kagekin: { name: 'ã‚«ã‚²ã‚­ãƒ³', avatar: 'https://pbs.twimg.com/profile_images/1905651963158835200/M06q-esr_400x400.jpg' },
            kabochashinshi: { name: 'ã‚«ãƒœãƒãƒ£ç´³å£«', avatar: 'https://pbs.twimg.com/profile_images/1775294690612695040/Eu5cuCVh_400x400.jpg' },
            user: { name: 'ã‚ãªãŸ', avatar: '' }
        };

        // Narrative Script with updated dialogues
        const script = [
            { char: 'oto', text: 'ã¿ã‚“ãªã€ã„ã‚ˆã„ã‚ˆã ã­ï¼ä»Šå¹´ã®ãƒ¨ã‚¤ã‚½ãƒ©ãƒ•ã‚§ã‚¹ã€æœ€é«˜ã®å¤ã«ã™ã‚‹ã‚ˆï¼ðŸ”¥' },
            { char: 'yui', text: 'ã‚ãƒ¼ï¼ãŠã¨ã¡ã‚ƒã‚“ã€å¾…ã£ã¦ã¾ã—ãŸï¼âœ¨ ä»Šå¹´ã¯ã©ã‚“ãªæ„Ÿã˜ã«ãªã‚‹ã®ï¼Ÿ' },
            { char: 'kawashii', text: 'ä¿ºã®å‡ºç•ªã ãªï¼ã‚¢ãƒ¼ãƒˆã¯çˆ†ç™ºã ï¼' },
            { char: 'oto', text: 'ãµãµãµâ€¦ ä»Šå¹´ã®ãƒ†ãƒ¼ãƒžã¯ã€Œã“ã®å¤ãŒã€é’æ˜¥ãŒã€çµ‚ã‚ã‚Šã¾ã›ã‚“ã‚ˆã†ã«ã€ã€‚å­¦æ ¡å…¨ä½“ã‚’ä½¿ã£ãŸã€ä¸€å¤œé™ã‚Šã®â€œå…±çŠ¯â€ãƒ•ã‚§ã‚¹ã ã‚ˆï¼' },
            { char: 'akira', text: 'â€œå…±çŠ¯â€ã‹ã€‚ã„ã„éŸ¿ãã ã€‚éŸ³æ¥½ã‚‚ã€æœ€é«˜ã®ã‚„ã¤ã‚’ç”¨æ„ã—ãªã„ã¨ãªã€‚' },
            { char: 'kabochashinshi', text: 'ã†ã‚€ï¼é’æ˜¥ã ã­ã‡ï¼ç§ã‚‚æœ€é«˜ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä»•å…¥ã‚Œã¦ããŸã‚ˆï¼å…‰ã‚‹ãƒ–ãƒ¬ã‚¹ãƒ¬ãƒƒãƒˆã¨ã‹ã€ç‰¹è£½ã‚¿ã‚ªãƒ«ã¨ã‹â€¦ï¼' },
            { char: 'kagekin', text: 'ãƒãƒ­ãƒ¼ãƒ­ãƒ¼ï¼ã‚«ã‚²ã‚­ãƒ³ã ã‚ˆãƒ¼ï¼ã“ã®ãƒ•ã‚§ã‚¹ãŒæˆåŠŸã—ãŸã‚‰ã€ãƒŸãƒ¼ãŒç”Ÿå¾’ä¼šé•·ã«ãªã‚‹ã®ã‚‚ãƒ›ãƒ©ãƒ¼ã‚·ãƒ§ãƒ¼ã ã­ãƒ¼ï¼' },
            { char: 'oto', text: 'ã‚‚ã€œã‚«ã‚²ã‚­ãƒ³ã¯ï¼ã¨ã«ã‹ãã€ã¿ã‚“ãªã«ãŠé¡˜ã„ãŒã‚ã‚‹ã‚“ã ã‘ã©â€¦' },
            {
                char: 'oto',
                text: 'ã¾ãšã¯ã€ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¸ã«ãªã‚‹ãƒ—ãƒ¼ãƒ«ã‚µã‚¤ãƒ‰ã®é£¾ã‚Šä»˜ã‘ã‹ã‚‰ï¼ã©ã‚“ãªé›°å›²æ°—ã«ã—ãŸã„ï¼Ÿ',
                choices: [
                    { text: 'ã‚­ãƒ©ã‚­ãƒ©ã§ã‚¨ãƒ¢ã„æ„Ÿã˜ï¼âœ¨', next: 'emo_choice' },
                    { text: 'æ‰‹ä½œã‚Šæ„Ÿã®ã‚ã‚‹ç§˜å¯†åŸºåœ°ã¿ãŸã„ã«ï¼ðŸ•ï¸', next: 'base_choice' },
                    { text: 'ä¼èª¬ã®ãƒ­ãƒƒã‚¯ãƒ•ã‚§ã‚¹ã£ã½ãã€ã‚«ãƒƒã‚³ã‚ˆãï¼ðŸŽ¸', next: 'rock_choice' }
                ]
            }
        ];

        const storyBranches = {
            emo_choice: [
                { char: 'yui', text: 'ã•ã‚“ã›ãƒ¼ã„ï¼å¤•æš®ã‚Œã®å…‰ã«åå°„ã—ã¦ã€çµ¶å¯¾ã‚­ãƒ¬ã‚¤ã ã‚ˆï¼' },
                { char: 'kabochashinshi', text: 'ã‚¨ãƒ¢ã„ã¯æ­£ç¾©ï¼ãã†ã„ã†é›°å›²æ°—ã®ã‚¢ã‚¤ãƒ†ãƒ ã¯ã‚ˆãå£²ã‚Œã‚‹ã‚“ã ã€ç§ã®çµŒé¨“ä¸Šã­ï¼' },
                { char: 'kawashii', text: 'ã‚¨ãƒ¢ã„çˆ†ç™ºã‚‚ãŠæ‰‹ã®ç‰©ã ãœã€‚ä»»ã›ãªï¼' },
                { char: 'oto', text: 'ã‚ˆã—ã€ã‚­ãƒ©ã‚­ãƒ©ã‚¨ãƒ¢è·¯ç·šã§ã„ã“ã†ï¼ã˜ã‚ƒã‚æ¬¡ã¯ã€ãƒ•ã‚§ã‚¹ã§ã‚„ã‚ŠãŸã„ã“ã¨ãªã‚“ã ã‘ã©â€¦' },
                { char: 'oto', text: 'ãƒ¨ã‚¤ã‚½ãƒ©é«˜æ ¡ã¨ã„ãˆã°ã€ã‚„ã£ã±ã‚Šä¸ƒä¸æ€è­°ã ã‚ˆã­ï¼ðŸ‘»', next: 'common_route' }
            ],
            base_choice: [
                { char: 'yui', text: 'ç§˜å¯†åŸºåœ°ï¼ã„ã„ã˜ã‚ƒã‚“ï¼ç§ãŸã¡ã ã‘ã®å ´æ‰€ã£ã¦æ„Ÿã˜ãŒã—ã¦ãƒ¯ã‚¯ãƒ¯ã‚¯ã™ã‚‹ï¼' },
                { char: 'akira', text: 'ãªã‚‹ã»ã©ã€‚æœ¨ã®æœºã¨ã‹æŒã¡è¾¼ã‚“ã§ã€ã‚¢ã‚³ãƒ¼ã‚¹ãƒ†ã‚£ãƒƒã‚¯ãªæ¼”å¥ã‚‚æ˜ ãˆãã†ã ãªã€‚' },
                { char: 'oto', 'text': 'æ±ºå®šï¼ã¿ã‚“ãªã§ä½œã‚Šä¸Šã’ã‚‹ç§˜å¯†åŸºåœ°ã«ã—ã‚ˆã†ï¼ã˜ã‚ƒã‚æ¬¡ã¯ã€ãƒ•ã‚§ã‚¹ã§ã‚„ã‚ŠãŸã„ã“ã¨ãªã‚“ã ã‘ã©â€¦' },
                { char: 'oto', text: 'ãƒ¨ã‚¤ã‚½ãƒ©é«˜æ ¡ã¨ã„ãˆã°ã€ã‚„ã£ã±ã‚Šä¸ƒä¸æ€è­°ã ã‚ˆã­ï¼ðŸ‘»', next: 'common_route' }
            ],
            rock_choice: [
                { char: 'akira', text: 'ãã‚Œã ã€‚ä¼èª¬ã®è»½éŸ³éƒ¨ãŒã‚„ã£ã¦ãŸã¿ãŸã„ã«ã€ã‚¬ãƒ„ãƒ³ã¨ãƒ­ãƒƒã‚¯ãªã‚¹ãƒ†ãƒ¼ã‚¸ã«ã—ãŸã„ã€‚' },
                { char: 'kawashii', text: 'ãƒ­ãƒƒã‚¯ãªã‚‰æ´¾æ‰‹ãªç‰¹åŠ¹(ãƒ‘ã‚¤ãƒ­)ã¯å¿…é ˆã ã‚ã†ï¼ä¿ºã®å‡ºç•ªã ãªï¼å®‰å¿ƒã—ã¦ãã‚Œã€å¨åŠ›ã¯ã¡ã‚ƒã‚“ã¨èª¿æ•´ã™ã‚‹ã‹ã‚‰ï¼â€¦ãŸã¶ã‚“ã€‚' },
                { char: 'oto', text: 'ã„ã„ã­ï¼ä¼èª¬ã®ãƒ­ãƒƒã‚¯ãƒ•ã‚§ã‚¹ã€å†ç¾ã—ã¡ã‚ƒãŠã†ï¼ã˜ã‚ƒã‚æ¬¡ã¯ã€ãƒ•ã‚§ã‚¹ã§ã‚„ã‚ŠãŸã„ã“ã¨ãªã‚“ã ã‘ã©â€¦' },
                { char: 'oto', text: 'ãƒ¨ã‚¤ã‚½ãƒ©é«˜æ ¡ã¨ã„ãˆã°ã€ã‚„ã£ã±ã‚Šä¸ƒä¸æ€è­°ã ã‚ˆã­ï¼ðŸ‘»', next: 'common_route' }
            ],
            common_route: [
                { char: 'yui', text: 'ä¸ƒä¸æ€è­°ï¼ã€Œå›ãå›³æ›¸å®¤ã€ã¨ã‹ã€ŒéŸ³æ¥½å®¤ã®ç§˜å¯†ã®ãƒ†ãƒ¼ãƒ—ã€ã¨ã‹ã§ã—ã‚‡ï¼Ÿã¡ã‚‡ã£ã¨æ€–ã„ã‘ã©ã€æ°—ã«ãªã‚‹â€¦ï¼' },
                { char: 'kagekin', text: 'ä¸ƒä¸æ€è­°ï¼ãƒ›ãƒ©ãƒ¼ã‚·ãƒ§ãƒ¼ã ã­ãƒ¼ï¼éžç§‘å­¦çš„ã ã‘ã©ã€ãƒŸãƒ¼ã®æ”¯æŒçŽ‡ã‚¢ãƒƒãƒ—ã«ç¹‹ãŒã‚Šãã†ã ã‚ˆãƒ¼ï¼ãƒ‹ãƒ£ãƒ¼ãƒ‹ãƒ£ãƒ¼ï¼' },
                { char: 'akira', text: 'éŸ³æ¥½å®¤ã®ãƒ†ãƒ¼ãƒ—ã¯ã€ãŸã ã®å™‚ã˜ã‚ƒãªã„ã‚‰ã—ã„ã€‚æ˜”ã®ãƒ•ã‚§ã‚¹ã®éŸ³æºãŒæ®‹ã£ã¦ã‚‹ã£ã¦è©±ã ã€‚' },
                { char: 'oto', text: 'ãã†ï¼ä»Šå›žã®ãƒ•ã‚§ã‚¹ã¯ã€ãŸã ã®ãƒ©ã‚¤ãƒ–ã ã‘ã˜ã‚ƒãªã„ã®ã€‚ã¿ã‚“ãªã§æ ¡èˆŽã‚’æŽ¢ç´¢ã—ã¦ã€ãƒ¨ã‚¤ã‚½ãƒ©é«˜æ ¡ã®â€œè¨˜æ†¶â€ã«è§¦ã‚Œã‚‹æ™‚é–“ã‚‚ä½œã‚ŠãŸã„ã‚“ã ã€‚' },
                {
                    char: 'oto',
                    text: 'ã¿ã‚“ãªã‚‚ã€ã“ã®â€œå…±çŠ¯è€…â€ã®ä¸€å“¡ã«ãªã£ã¦ãã‚Œã‚‹ï¼Ÿ',
                    choices: [
                        { text: 'ã‚‚ã¡ã‚ã‚“ï¼é¢ç™½ãã†ï¼', next: 'final_route' },
                        { text: 'æœ€é«˜ã®å¤ã«ã—ã‚ˆã†ï¼', next: 'final_route' }
                    ]
                }
            ],
            final_route: [
                { char: 'oto', text: 'ã‚ã‚ŠãŒã¨ã†ï¼å¿ƒå¼·ã„ã‚ˆï¼' },
                { char: 'yui', text: 'ã¿ã‚“ãªã§ã‚„ã‚Œã°ã€çµ¶å¯¾æˆåŠŸã™ã‚‹ã‚ˆï¼' },
                { char: 'akira', text: 'ã‚ã‚ã€‚å¿˜ã‚Œã‚‰ã‚Œãªã„ä¸€å¤œã«ã—ã¦ã‚„ã‚‹ã•ã€‚' },
                { char: 'kabochashinshi', text: 'ã“ã‚Œãžé’æ˜¥â€¦ï¼ç§ã‚‚å…¨åŠ›ã§ã‚µãƒãƒ¼ãƒˆã•ã›ã¦ã‚‚ã‚‰ã†ã‚ˆã€ä¸€äººã®â€œç”Ÿå¾’â€ã¨ã—ã¦ã­ï¼' },
                { char: 'oto', text: 'ã˜ã‚ƒã‚ã€ä½œæˆ¦ä¼šè­°ã¯ã“ã“ã¾ã§ï¼è©³ç´°ã¯ã¾ãŸé€£çµ¡ã™ã‚‹ã­ã€‚9æœˆ23æ—¥ã€ãƒ¨ã‚¤ã‚½ãƒ©é«˜æ ¡ã§å¾…ã£ã¦ã‚‹ï¼ #YOISORAFES' },
                { char: 'system', text: 'To be continued...', next: 'show_logo' }
            ],
            show_logo: [
                { char: 'logo' }
            ]
        };

        let currentScript = script;
        let scriptIndex = 0;
        let soundReady = false;

        document.body.addEventListener('click', () => {
            if (!soundReady) {
                Tone.start();
                soundReady = true;
            }
        }, { once: true });

        function createExplosion(element) {
            if (!soundReady) return;
            
            // Sound effect with reduced volume (-18dB)
            const noise = new Tone.NoiseSynth({
                noise: { type: 'white' },
                envelope: { attack: 0.005, decay: 0.2, sustain: 0.1, release: 0.2 }
            }).toDestination();
            noise.volume.value = -18;

            const synth = new Tone.Synth({
                oscillator: { type: 'sine' },
                envelope: { attack: 0.01, decay: 0.3, sustain: 0, release: 0.2 }
            }).toDestination();
            synth.volume.value = -18;
            
            noise.triggerAttackRelease("8n");
            synth.triggerAttackRelease("C2", "8n", Tone.now() + 0.05);

            // Animation effect
            const emojis = ['ðŸ’¥', 'ðŸ”¥', 'âœ¨', 'ðŸ’£', 'ðŸ’¨'];
            const rect = element.getBoundingClientRect();
            const originX = rect.left + rect.width / 2;
            const originY = rect.top + rect.height / 2;

            for (let i = 0; i < 25; i++) {
                const emoji = document.createElement('div');
                emoji.className = 'explosion-emoji';
                emoji.innerText = emojis[Math.floor(Math.random() * emojis.length)];
                document.body.appendChild(emoji);

                gsap.set(emoji, { left: originX, top: originY });

                gsap.to(emoji, {
                    x: (Math.random() - 0.5) * 300,
                    y: (Math.random() - 0.5) * 300,
                    opacity: 0,
                    rotation: Math.random() * 720,
                    duration: Math.random() * 1 + 0.5,
                    ease: "power2.out",
                    onComplete: () => emoji.remove()
                });
            }
        }

        function addMessage(char, text) {
            return new Promise(resolve => {
                setTimeout(() => {
                    const character = characters[char];
                    const messageWrapper = document.createElement('div');
                    messageWrapper.className = 'flex items-start gap-3 fade-in';

                    const avatar = document.createElement('img');
                    avatar.src = character.avatar;
                    avatar.alt = character.name;
                    avatar.className = 'w-10 h-10 rounded-full shadow-md object-cover';
                    avatar.onerror = () => { avatar.src = 'https://placehold.co/40x40/cccccc/ffffff?text=?'; };

                    const messageContent = document.createElement('div');
                    
                    const name = document.createElement('div');
                    name.className = 'text-sm text-gray-300 font-bold';
                    name.textContent = character.name;

                    const bubble = document.createElement('div');
                    bubble.className = 'chat-bubble chat-bubble-left relative mt-1 bg-white text-gray-800 p-3 rounded-lg rounded-tl-none shadow-md max-w-xs';
                    bubble.textContent = text;
                    
                    if (char === 'kawashii') {
                        bubble.style.cursor = 'pointer';
                        bubble.addEventListener('click', () => createExplosion(bubble));
                    }

                    messageContent.appendChild(name);
                    messageContent.appendChild(bubble);
                    messageWrapper.appendChild(avatar);
                    messageWrapper.appendChild(messageContent);
                    
                    chatArea.appendChild(messageWrapper);
                    chatArea.scrollTop = chatArea.scrollHeight;
                    resolve();
                }, Math.random() * 2000 + 2000);
            });
        }
        
        function addSystemMessage(text) {
             return new Promise(resolve => {
                setTimeout(() => {
                    const messageWrapper = document.createElement('div');
                    messageWrapper.className = 'text-center text-sm text-purple-300 py-2 fade-in';
                    messageWrapper.textContent = text;
                    chatArea.appendChild(messageWrapper);
                    chatArea.scrollTop = chatArea.scrollHeight;
                    resolve();
                }, 1000);
             });
        }

        function showLogo() {
            return new Promise(resolve => {
                setTimeout(() => {
                    const logoContainer = document.createElement('div');
                    logoContainer.className = 'text-center mt-4 fade-in';
                    const logoImg = document.createElement('img');
                    logoImg.src = 'https://i.imgur.com/CFch2EA.png';
                    logoImg.alt = 'Yoisora Fes Logo';
                    logoImg.className = 'mx-auto max-w-xs';
                    logoContainer.appendChild(logoImg);
                    chatArea.appendChild(logoContainer);
                    chatArea.scrollTop = chatArea.scrollHeight;
                    resolve();
                }, 1000);
            });
        }

        function showChoices(choices) {
            choicesContainer.innerHTML = '';
            choiceArea.classList.remove('opacity-0');
            choices.forEach(choice => {
                const button = document.createElement('button');
                button.className = 'w-full bg-purple-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-purple-700 transition-all duration-200 shadow-lg transform hover:scale-105';
                button.textContent = choice.text;
                button.onclick = () => handleChoice(choice.next);
                choicesContainer.appendChild(button);
            });
        }

        function handleChoice(nextBranchKey) {
            choicesContainer.innerHTML = '';
            
            const userChoiceText = event.target.textContent;
            const userMessageWrapper = document.createElement('div');
            userMessageWrapper.className = 'flex items-start gap-3 fade-in justify-end';
            
            const bubble = document.createElement('div');
            bubble.className = 'relative mt-1 bg-purple-500 text-white p-3 rounded-lg rounded-br-none shadow-md max-w-xs';
            bubble.textContent = userChoiceText;

            userMessageWrapper.appendChild(bubble);
            chatArea.appendChild(userMessageWrapper);
            chatArea.scrollTop = chatArea.scrollHeight;

            currentScript = storyBranches[nextBranchKey];
            scriptIndex = 0;
            playScript();
        }

        async function playScript() {
            if (scriptIndex < currentScript.length) {
                const line = currentScript[scriptIndex];
                
                if (line.char === 'system') {
                    await addSystemMessage(line.text);
                } else if (line.char === 'logo') {
                    await showLogo();
                }
                else {
                    await addMessage(line.char, line.text);
                }

                if (line.choices) {
                    showChoices(line.choices);
                } else if (line.next) {
                    currentScript = storyBranches[line.next];
                    scriptIndex = 0;
                    playScript();
                } else {
                    scriptIndex++;
                    playScript();
                }
            }
        }

        window.onload = () => {
            playScript();
        };
    </script>
</body>
</html>
